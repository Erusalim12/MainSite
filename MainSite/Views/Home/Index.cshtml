@using MainSite.Extensions
@using MainSite.ViewModels.News
@model MainSite.ViewModels.News.NewsListViewModel
@{
    ViewData["Title"] = "Новости";
    ViewData["categoryId"] = Model.CategoryId;
}

@Html.Partial("BirthdayUsers")

<div id="newsComponent">
    @Html.Partial("Create", new NewsItemViewModel())

    <div class="card-panel row">
        @foreach (var item in Model.News)
        {
             var TypeMessage = item.Files?.Count > 0 ? "документ" : "сообщение";

            <div class="card_news">
                <div class="card_news-image"><img src="@Url.Content(@item.UrlImg)" alt="" /></div>
                <div class="card_news-main">
                    <div class="card_news-main-header"><span class="bold">@item.AutorFio</span> разместил @TypeMessage в разделе <a href="@item.MenuItemAction">@item.MenuItemName</a></div>
                    <div class="card_news-main-title"><a href="@Url.Action("Details", @item.NameAction, new { id = item.Id })">@item.Name</a></div>
                    <div class="card_news-main-footer">@item.CreatedDate</div>
                </div>

                <div class="card_news-editor">
                    <a href="@Url.Action("edit")"><i class="material-icons">edit</i></a>
                    <a href="#" class="error"><i class="material-icons">close</i></a>
                </div>
            </div>
        }
    </div>
</div>

@{
    var pager = Html.Pager(Model.PagerModel);
    if (!string.IsNullOrEmpty(pager.RenderHtmlContent()))
    {
        <div class="card-panel row">
            <div class="pagination">
                @pager
            </div>
        </div>
    }
}

<script type="text/javascript">
    var vm = new Vue({
        el: '#newsComponent',
        data: {
            classObject: {
                'active': false,
                'desActive': false
            }
        },
        methods: {
            showCreator: function (active, desActive) {
                this.classObject['active'] = active;
                this.classObject['desActive'] = desActive;
            }
        }
    });
</script>